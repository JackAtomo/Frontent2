{"ast":null,"code":"import _regeneratorRuntime from \"/home/server/Escritorio/Frontent2/node_modules/@babel/runtime/regenerator\";\nimport _slicedToArray from \"/home/server/Escritorio/Frontent2/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/server/Escritorio/Frontent2/src/componets/pages/user.js\";\nimport React, { useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { getDatos, deleteAcount, buySeguro } from \"../axios/userServices\";\nimport { useAuth } from \"../commons/auth/auth-context\";\n\nfunction User() {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isFormOpen = _useState2[0],\n      setIsFormOpen = _useState2[1];\n\n  var _useAuth = useAuth(),\n      token = _useAuth.token;\n\n  var login = document.getElementById('login');\n  login.innerHTML = \"\";\n  login.parentNode.removeChild(login);\n  Datos();\n  return React.createElement(React.Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 21\n    },\n    __self: this\n  }, React.createElement(\"section\", {\n    id: \"user\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 22\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    id: \"datos\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 23\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 24\n    },\n    __self: this\n  }, \"Mis Datos:\"), React.createElement(\"fieldset\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 25\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    id: \"first_name\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26\n    },\n    __self: this\n  }), React.createElement(\"h3\", {\n    id: \"last_name\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27\n    },\n    __self: this\n  })), React.createElement(\"fieldset\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30\n    },\n    __self: this\n  }, \"Phone:\"), React.createElement(\"label\", {\n    id: \"phone\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31\n    },\n    __self: this\n  })), React.createElement(\"fieldset\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34\n    },\n    __self: this\n  }, \"email:\"), React.createElement(\"label\", {\n    id: \"email\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35\n    },\n    __self: this\n  })), React.createElement(\"fieldset\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38\n    },\n    __self: this\n  }, \"gender:\"), React.createElement(\"label\", {\n    id: \"gender\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39\n    },\n    __self: this\n  })), React.createElement(\"fieldset\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42\n    },\n    __self: this\n  }, \"Direccion:\"), React.createElement(\"label\", {\n    id: \"address\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  })), React.createElement(\"fieldset\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }, \"Fecha de nacimiento:\"), React.createElement(\"label\", {\n    id: \"dob\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  })), React.createElement(\"fieldset\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, \"Born IN:\"), React.createElement(\"label\", {\n    id: \"born_in\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  })), React.createElement(\"fieldset\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }, \"Codigo Postal:\"), React.createElement(\"label\", {\n    id: \"postal_code\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }))), React.createElement(\"span\", {\n    id: \"solicitud\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, \"Solicitar asistencia:\"), React.createElement(\"fieldset\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, \"Titulo:\"), React.createElement(\"input\", {\n    type: \"text\",\n    id: \"title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  })), React.createElement(\"fieldset\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, \"Descripcion\"), React.createElement(\"textarea\", {\n    id: \"description\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  })), React.createElement(\"fieldset\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, \"Precio Estimado\"), React.createElement(\"input\", {\n    type: \"number\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  })), React.createElement(\"fieldset\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, \"Enviar\"))), React.createElement(\"span\", {\n    id: \"acciones\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, \"Acciones\"), React.createElement(\"fieldset\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    onClick: function onClick() {\n      return setIsFormOpen(true);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, \"Cambiar Datos\"), React.createElement(\"button\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, \"Contratar Seguro\")), React.createElement(\"fieldset\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    class: \"danger\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, \" Dar de baja poliza\"), React.createElement(\"button\", {\n    class: \"danger\",\n    id: \"danger\",\n    onClick: function onClick() {\n      return del(token);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, \"Cancelar Cuenta\")))), isFormOpen && Contratar(token));\n}\n\nexport default User;\n\nfunction del(token) {\n  var respon;\n  return _regeneratorRuntime.async(function del$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return _regeneratorRuntime.awrap(deleteAcount(token));\n\n        case 2:\n          respon = _context.sent;\n          _context.next = 5;\n          return _regeneratorRuntime.awrap(respon);\n\n        case 5:\n          if (!_context.sent) {\n            _context.next = 7;\n            break;\n          }\n\n          window.location.href = \"https://segurosalud.herokuapp.com/\";\n\n        case 7:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n}\n\nfunction Datos() {\n  var _useAuth2, token, response, data, keys, values, index, value, res;\n\n  return _regeneratorRuntime.async(function Datos$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _useAuth2 = useAuth(), token = _useAuth2.token;\n          _context2.next = 3;\n          return _regeneratorRuntime.awrap(getDatos(token));\n\n        case 3:\n          response = _context2.sent;\n          data = response.data.Datos;\n          _context2.next = 7;\n          return _regeneratorRuntime.awrap(response);\n\n        case 7:\n          console.log(data);\n          _context2.next = 10;\n          return _regeneratorRuntime.awrap(data.first_name);\n\n        case 10:\n          document.getElementById(\"first_name\").innerHTML = _context2.sent;\n          keys = Object.keys(data);\n          values = Object.values(data);\n          index = 0;\n\n        case 14:\n          if (!(index < keys.length)) {\n            _context2.next = 31;\n            break;\n          }\n\n          if (!(keys[index] == \"gender\")) {\n            _context2.next = 26;\n            break;\n          }\n\n          value = null;\n          _context2.t0 = values[index];\n          _context2.next = _context2.t0 === 0 ? 20 : _context2.t0 === 1 ? 22 : 24;\n          break;\n\n        case 20:\n          value[index] = \"Mujer\";\n          return _context2.abrupt(\"break\", 24);\n\n        case 22:\n          values[index] = \"Hombre\";\n          return _context2.abrupt(\"break\", 24);\n\n        case 24:\n          _context2.next = 27;\n          break;\n\n        case 26:\n          if (keys[index] == \"dob\") {\n            res = values[index].split(\"T\");\n            values[index] = res[0];\n          }\n\n        case 27:\n          document.getElementById(\"\".concat(keys[index])).innerHTML = values[index];\n\n        case 28:\n          index++;\n          _context2.next = 14;\n          break;\n\n        case 31:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  });\n}\n\nfunction Contratar(token) {\n  var _useForm = useForm({\n    mode: \"onBlur\" // Lanza validaciones cada vez que hago blur\n\n  }),\n      register = _useForm.register,\n      errors = _useForm.errors,\n      formState = _useForm.formState,\n      handleSubmit = _useForm.handleSubmit,\n      setError = _useForm.setError;\n\n  function buyInsur(token) {\n    var type = document.getElementById(\"type\").value;\n    var precio = calcularPrecio(type);\n    return buySeguro(token, type, precio).catch(function (error) {\n      console.log(\"error\");\n\n      try {\n        var statusl = document.getElementById(\"statusl\");\n        statusl.innerHTML = \"Algo a ido mal intentelo de nuevo Error:\".concat(error.response.status);\n      } catch (_unused) {}\n    });\n  }\n\n  ;\n  return React.createElement(\"span\", {\n    id: \"buyinsurances\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    onClick: function onClick() {\n      var buyinsurances = document.getElementById('buyinsurances');\n      buyinsurances.innerHTML = \"\";\n      buyinsurances.parentNode.removeChild(buyinsurances);\n    },\n    className: \"close\",\n    id: \"close\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169\n    },\n    __self: this\n  }, \"X\"), React.createElement(\"form\", {\n    action: \"\",\n    method: \"post\",\n    onSubmit: handleSubmit(buyInsur(token)),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    id: \"statusl\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173\n    },\n    __self: this\n  }), React.createElement(\"fieldset\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174\n    },\n    __self: this\n  }, React.createElement(\"select\", {\n    id: \"type\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175\n    },\n    __self: this\n  }, React.createElement(\"option\", {\n    value: \"0\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176\n    },\n    __self: this\n  }, \"Basico\"), React.createElement(\"option\", {\n    value: \"1\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179\n    },\n    __self: this\n  }, \"Reforzado\"), React.createElement(\"option\", {\n    value: \"2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182\n    },\n    __self: this\n  }, \"Premiun\")), React.createElement(\"button\", {\n    type: \"submit\",\n    disabled: formState.isSubmitting,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186\n    },\n    __self: this\n  }, \"Entrar\")))));\n}\n\nfunction calcularPrecio(type) {\n  var edad = document.getElementById(\"dob\").value;\n  var pais = document.getElementById(\"born_in\").value;\n  var sexo = document.getElementById(\"gender\").value;\n  var incremento = 0;\n  var precio = 0;\n\n  switch (type) {\n    case 0:\n      precio = 10;\n      break;\n\n    case 1:\n      precio = 20;\n      break;\n\n    case 2:\n      precio = 30;\n      break;\n  }\n\n  if (edad == 50 || edad < 30) {\n    incremento = incremento + 16.66;\n  }\n\n  if (pais !== \"España\") {\n    incremento = incremento + 33.33;\n  }\n\n  if (sexo === \"Hombre\") {\n    incremento = incremento + 33.33;\n  }\n\n  incremento = (incremento + 100) / 100;\n  precio = Math.round(precio * incremento * 100) / 100;\n  return precio;\n}","map":{"version":3,"sources":["/home/server/Escritorio/Frontent2/src/componets/pages/user.js"],"names":["React","useState","useForm","getDatos","deleteAcount","buySeguro","useAuth","User","isFormOpen","setIsFormOpen","token","login","document","getElementById","innerHTML","parentNode","removeChild","Datos","del","Contratar","respon","window","location","href","response","data","console","log","first_name","keys","Object","values","index","length","value","res","split","mode","register","errors","formState","handleSubmit","setError","buyInsur","type","precio","calcularPrecio","catch","error","statusl","status","buyinsurances","isSubmitting","edad","pais","sexo","incremento","Math","round"],"mappings":"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","sourcesContent":["import React, {useState} from \"react\"\nimport { useForm } from \"react-hook-form\";\nimport {getDatos, deleteAcount, buySeguro} from \"../axios/userServices\";\nimport { useAuth } from \"../commons/auth/auth-context\";\n\nfunction User() {\n  const [isFormOpen, setIsFormOpen] = useState(false);\n\n  const {token} = useAuth();\n  \n  \n  let login = document.getElementById('login');\n login.innerHTML=\"\"  \n  login.parentNode.removeChild(login);\n  \n  \n \n\n  Datos()\n  return (\n      <React.Fragment>\n        <section id=\"user\">\n  <span id=\"datos\">\n  <h1>Mis Datos:</h1>\n  <fieldset>\n  <h2 id=\"first_name\"></h2>\n    <h3 id=\"last_name\"></h3>\n  </fieldset>\n  <fieldset>\n    <label>Phone:</label>\n<label id=\"phone\"></label>\n  </fieldset>\n  <fieldset>\n    <label>email:</label>\n<label id=\"email\"></label>\n  </fieldset>\n  <fieldset>\n    <label>gender:</label>\n<label id=\"gender\"></label>\n  </fieldset>\n  <fieldset>\n    <label>Direccion:</label>\n    <label id=\"address\"></label>\n  </fieldset>\n  <fieldset>\n    <label>Fecha de nacimiento:</label>\n<label id=\"dob\"></label>\n  </fieldset>\n  <fieldset>\n    <label>Born IN:</label>\n<label id=\"born_in\"></label>\n  </fieldset>\n  <fieldset>\n    <label>Codigo Postal:</label>\n<label id=\"postal_code\"></label>\n  </fieldset>\n  </span>\n          <span id=\"solicitud\">\n            <h1>Solicitar asistencia:</h1>\n            <fieldset>\n              <h2>Titulo:</h2>\n              <input type=\"text\" id=\"title\" />\n            </fieldset>\n            <fieldset>\n              <h3>Descripcion</h3>\n              <textarea id=\"description\" />\n            </fieldset>\n            <fieldset>\n              <h3>Precio Estimado</h3>\n              <input type=\"number\" />\n            </fieldset>\n            <fieldset>\n              <button>Enviar</button>\n            </fieldset>\n          </span>\n          <span id=\"acciones\">\n            <h1>Acciones</h1>\n            <fieldset>\n              <button onClick={() => setIsFormOpen(true)}>Cambiar Datos</button>\n              <button>Contratar Seguro</button>\n              \n\n            </fieldset>\n            <fieldset>\n            <button class=\"danger\"> Dar de baja poliza</button>\n              <button class=\"danger\" id=\"danger\" onClick={()=>del(token)} >Cancelar Cuenta</button>\n            </fieldset>\n          </span>\n        </section>\n        {isFormOpen && Contratar(token)}\n      </React.Fragment>\n    );\n  }\n\n\nexport default User;\n\n\nasync function del(token){\n  let respon = await deleteAcount(token)\n    if(await respon ){\n      window.location.href=\"https://segurosalud.herokuapp.com/\"\n    }\n }\n \n  \n  \n\n async function Datos(){\n  \n  const {token} = useAuth();\n  const  response = await getDatos(token);\n  const data= response.data.Datos\n  await response;\n    console.log(data);\n    document.getElementById(\"first_name\").innerHTML= await data.first_name\n  const keys = Object.keys(data)\nconst values= Object.values(data)\n  for (let index = 0; index < keys.length; index++) {\n    if(keys[index]==\"gender\"){\n      let value=null\n      switch (values[index]) {\n        case 0:\n        value[index] =\"Mujer\";\n        break;\n        case 1:\n        values[index]=\"Hombre\";\n        break;\n    }\n  }else if (keys[index]==\"dob\") {\n    var res = values[index].split(\"T\") \n    values[index]=res[0];\n  }\n\n    document.getElementById(`${keys[index]}`).innerHTML= values[index]\n\n  }\n\n    \n  }\n\n\n\n  function Contratar(token) {\n    const { register, errors, formState, handleSubmit, setError } = useForm({\n      mode: \"onBlur\" // Lanza validaciones cada vez que hago blur\n    });\n    \n    \n    function buyInsur(token){\n      let type=document.getElementById(\"type\").value\n      let precio=calcularPrecio(type)\n      ;\n      return buySeguro(token,type,precio).catch(error => {\n        console.log(\"error\")\n        try{\n        let statusl=document.getElementById(\"statusl\");\n          statusl.innerHTML=`Algo a ido mal intentelo de nuevo Error:${error.response.status}`;\n      \n      }catch{\n      }\n      });\n    };\n  \n    return (\n   \n    <span id=\"buyinsurances\">  \n    <div>\n      <button onClick={()=>{let buyinsurances = document.getElementById('buyinsurances');\n   buyinsurances.innerHTML=\"\"  \n   buyinsurances.parentNode.removeChild(buyinsurances)}} className=\"close\" id=\"close\">X</button>\n      <form action=\"\" method=\"post\" onSubmit={handleSubmit(buyInsur(token))}>\n      <span id=\"statusl\"></span>\n        <fieldset>\n          <select id=\"type\">\n            <option value=\"0\">\n              Basico\n            </option>\n            <option value=\"1\">\n              Reforzado\n              </option>\n              <option value=\"2\">\n              Premiun\n              </option>\n          </select>\n          <button type=\"submit\" disabled={formState.isSubmitting}>\n          Entrar\n        </button>\n        </fieldset>\n      </form>\n      </div>\n    </span>\n    );\n  }\n\n  function calcularPrecio(type) {\n    let edad = document.getElementById(\"dob\").value;\n    let pais = document.getElementById(\"born_in\").value;\n    let sexo = document.getElementById(\"gender\").value;\n    let incremento = 0;\n    let precio=0\n    switch (type) {\n      case 0:\n    precio = 10;\n        break;\n        case 1:\n    precio = 20;\n        break;\n      case 2:\n        precio = 30;\n            break;\n      }\n    \n    if (edad == 50 || edad < 30) {\n      incremento = incremento + 16.66;\n    }\n    if (pais !== \"España\") {\n      incremento = incremento + 33.33;\n    }\n    if (sexo === \"Hombre\") {\n      incremento = incremento + 33.33;\n    }\n    incremento = (incremento + 100) / 100;\n    precio = Math.round(precio * incremento * 100) / 100;\n \n    return precio;\n  }"]},"metadata":{},"sourceType":"module"}