{"ast":null,"code":"import _regeneratorRuntime from \"/home/server/Escritorio/Frontent2/node_modules/@babel/runtime/regenerator\";\nimport _slicedToArray from \"/home/server/Escritorio/Frontent2/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/server/Escritorio/Frontent2/src/componets/pages/user.js\";\nimport React, { useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { getDatos, solicitarAsistencia, deleteAcount, buySeguro, getPolices, cancelPolice } from \"../axios/userServices\";\nimport { useAuth } from \"../commons/auth/auth-context\";\n\nfunction User() {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isFormOpen = _useState2[0],\n      setIsFormOpen = _useState2[1];\n\n  var _useAuth = useAuth(),\n      token = _useAuth.token;\n\n  var login = document.getElementById('login');\n\n  if (login != null) {\n    login.innerHTML = \"\";\n    login.parentNode.removeChild(login);\n  }\n\n  Poliza(token);\n  Datos();\n  return React.createElement(React.Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 21\n    },\n    __self: this\n  }, React.createElement(\"section\", {\n    id: \"user\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 22\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    id: \"datos\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 23\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 24\n    },\n    __self: this\n  }, \"Mis Datos:\"), React.createElement(\"fieldset\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 25\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    id: \"first_name\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26\n    },\n    __self: this\n  }), React.createElement(\"h3\", {\n    id: \"last_name\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27\n    },\n    __self: this\n  })), React.createElement(\"fieldset\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30\n    },\n    __self: this\n  }, \"Phone:\"), React.createElement(\"label\", {\n    id: \"phone\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31\n    },\n    __self: this\n  })), React.createElement(\"fieldset\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34\n    },\n    __self: this\n  }, \"email:\"), React.createElement(\"label\", {\n    id: \"email\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35\n    },\n    __self: this\n  })), React.createElement(\"fieldset\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38\n    },\n    __self: this\n  }, \"gender:\"), React.createElement(\"label\", {\n    id: \"gender\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39\n    },\n    __self: this\n  })), React.createElement(\"fieldset\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42\n    },\n    __self: this\n  }, \"Direccion:\"), React.createElement(\"label\", {\n    id: \"address\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  })), React.createElement(\"fieldset\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }, \"Fecha de nacimiento:\"), React.createElement(\"label\", {\n    id: \"dob\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  })), React.createElement(\"fieldset\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, \"Born IN:\"), React.createElement(\"label\", {\n    id: \"born_in\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  })), React.createElement(\"fieldset\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }, \"Codigo Postal:\"), React.createElement(\"label\", {\n    id: \"postal_code\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  })), React.createElement(\"fieldset\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    class: \"danger\",\n    id: \"danger\",\n    onClick: function onClick() {\n      return del(token);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, \"Cancelar Cuenta\")))), React.createElement(\"span\", {\n    id: \"poliza\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    id: \"mis_polizas\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, \"Mis Poliza:\"), React.createElement(\"fieldset\", {\n    id: \"polizas\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }), React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, \"Contratar nueva Poliza\"), React.createElement(\"fieldset\", {\n    id: \"contratar\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, Contratar(token)), React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, \" Cancelaci\\xF3n\"), React.createElement(\"fieldset\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, BajaPoliza(token))), React.createElement(\"span\", {\n    id: \"solicitud\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, \"Solicitar asistencia:\"), React.createElement(\"fieldset\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, \"Titulo:\"), React.createElement(\"input\", {\n    type: \"text\",\n    id: \"title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  })), React.createElement(\"fieldset\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, \"Descripcion\"), React.createElement(\"textarea\", {\n    id: \"description\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  })), React.createElement(\"fieldset\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, \"Precio Estimado\"), React.createElement(\"input\", {\n    type: \"number\",\n    id: \"price\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  })), React.createElement(\"fieldset\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    onClick: function onClick() {\n      return enviar(token);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, \"Enviar\"))), React.createElement(\"span\", {\n    id: \"acciones\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, \"Acciones\"), React.createElement(\"fieldset\", {\n    id: \"cambiar_datos\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    onClick: function onClick() {\n      return formDatos();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }, \"Cambiar Datos\")), React.createElement(\"fieldset\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }))));\n}\n\nexport default User;\n\nfunction formDatos() {\n  var first_name = document.getElementById(\"first_name\").innerHTML;\n  var last_name = document.getElementById(\"last_name\").innerHTML;\n  var email = document.getElementById(\"email\").innerHTML;\n  var dob = document.getElementById(\"dob\").innerHTML;\n  var address = document.getElementById(\"address\").innerHTML;\n  var postal_code = document.getElementById(\"postal_code\").innerHTML;\n  var phone = document.getElementById(\"phone\").innerHTML;\n  var BorIn = document.getElementById(\"born_in\").innerHTML;\n  document.getElementById(\"cambiar_datos\").innerHTML = \"\\n<fieldset>\\n  <label>Nombre</label>\\n  <input type=\\\"text\\\" required id=\\\"c_first_name\\\" value=\".concat(first_name, \">\\n  </fieldset>\\n  <fieldset>\\n  <label>Apellidos</label>\\n  <input type=\\\"text\\\" required id=\\\"c_last_name\\\" value=\").concat(last_name, \">\\n  </fieldset>\\n  <fieldset>\\n  <label>Email</label>\\n  <input type=\\\"text\\\" required id=\\\"c_email\\\" value=\").concat(email, \">\\n  </fieldset>\\n  <fieldset>\\n  <label>Password</label>\\n  <input type=\\\"password\\\" required id=\\\"c_password\\\">\\n  </fieldset>\\n  <fieldset>\\n  <label>Genero</label>\\n  <select id=\\\"c_gender\\\" required>\\n    <option value=\\\"0\\\">Hombre</option>\\n    <option value=\\\"1\\\">Mujer</option>\\n  </select>  \\n  </fieldset>\\n  <fieldset>\\n  <label>Fecha de nacimiento</label>\\n  <input required type=\\\"date\\\" value=\").concat(dob, \" id=\\\"c_dob\\\">\\n  </fieldset>\\n  <fieldset>\\n  <label>Direccion</label>\\n  <input required type=\\\"text\\\" id=\\\"c_address\\\" value=\").concat(address, \">\\n  </fieldset>\\n  <fieldset>\\n  <label>Codigo Postal</label>\\n  <input required type=\\\"text\\\" id=\\\"c_postal_code\\\" value=\").concat(postal_code, \">\\n  </fieldset>\\n  <fieldset>\\n  <label>Telefono</label>\\n  <input type=\\\"text\\\" required id=\\\"c_phone\\\" value=\").concat(phone, \">\\n  </fieldset>\\n  <fieldset>\\n  <label>BorIn</label>\\n  <input type=\\\"text\\\" required id=\\\"c_BorIn\\\" value=\").concat(BorIn, \">\\n  </fieldset>\\n  <button onClick=consoles() >Cambiar Datos</button>\\n  \");\n  document.getElementById(\"cambio\").style = \"visibility:visible\";\n}\n\nfunction consoles() {\n  console.log(\"parece que si\");\n}\n\nfunction enviar(token) {\n  var title, description, price, content;\n  return _regeneratorRuntime.async(function enviar$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          title = document.getElementById(\"title\").value;\n          description = document.getElementById(\"description\").value;\n          price = document.getElementById(\"price\").value;\n          content = \"\".concat(title, \":\").concat(description, \".Price:\").concat(price);\n          _context.prev = 4;\n          _context.next = 7;\n          return _regeneratorRuntime.awrap(solicitarAsistencia(token, content));\n\n        case 7:\n          document.getElementById(\"title\").value = \"\";\n          document.getElementById(\"description\").value = \"\";\n          document.getElementById(\"price\").value = \"\";\n          window.alert(\"Solicitud Enviada\");\n          _context.next = 16;\n          break;\n\n        case 13:\n          _context.prev = 13;\n          _context.t0 = _context[\"catch\"](4);\n          window.alert(\"Algo a ido mal intentelo de nuevo\");\n\n        case 16:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, [[4, 13]]);\n}\n\nfunction BajaPoliza(token) {\n  function Optiones(token) {\n    var response, policies, out, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, police, _out;\n\n    return _regeneratorRuntime.async(function Optiones$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(getPolices(token));\n\n          case 2:\n            response = _context2.sent;\n            policies = response.data;\n            document.getElementById(\"policies\").innerHTML = \"\";\n            out = \"\";\n            _iteratorNormalCompletion = true;\n            _didIteratorError = false;\n            _iteratorError = undefined;\n            _context2.prev = 9;\n\n            for (_iterator = policies[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n              police = _step.value;\n              _out = \"<option value=\\\"\".concat(police.policyId, \"\\\">\").concat(police.policyNumber, \"</option>\");\n              document.getElementById(\"policies\").innerHTML = _out + document.getElementById(\"policies\").innerHTML;\n            }\n\n            _context2.next = 17;\n            break;\n\n          case 13:\n            _context2.prev = 13;\n            _context2.t0 = _context2[\"catch\"](9);\n            _didIteratorError = true;\n            _iteratorError = _context2.t0;\n\n          case 17:\n            _context2.prev = 17;\n            _context2.prev = 18;\n\n            if (!_iteratorNormalCompletion && _iterator.return != null) {\n              _iterator.return();\n            }\n\n          case 20:\n            _context2.prev = 20;\n\n            if (!_didIteratorError) {\n              _context2.next = 23;\n              break;\n            }\n\n            throw _iteratorError;\n\n          case 23:\n            return _context2.finish(20);\n\n          case 24:\n            return _context2.finish(17);\n\n          case 25:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, [[9, 13, 17, 25], [18,, 20, 24]]);\n  }\n\n  function cancel(token) {\n    var id;\n    return _regeneratorRuntime.async(function cancel$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            console.log(\"cancel\");\n\n            if (!(document.getElementById(\"policies\") != null)) {\n              _context3.next = 14;\n              break;\n            }\n\n            id = document.getElementById(\"policies\").value;\n            _context3.prev = 3;\n            _context3.next = 6;\n            return _regeneratorRuntime.awrap(cancelPolice(token, id));\n\n          case 6:\n            window.alert(\"Poliza borrada\");\n            Poliza(token);\n            Optiones(token);\n            _context3.next = 14;\n            break;\n\n          case 11:\n            _context3.prev = 11;\n            _context3.t0 = _context3[\"catch\"](3);\n            window.alert(\"Algo a ido mal intentelo de nuevo\");\n\n          case 14:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, [[3, 11]]);\n  }\n\n  Optiones(token);\n  return React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229\n    },\n    __self: this\n  }, \"Mis polizas:\"), React.createElement(\"select\", {\n    id: \"policies\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230\n    },\n    __self: this\n  }), React.createElement(\"button\", {\n    id: \"cotratar\",\n    onClick: function onClick() {\n      return cancel(token);\n    },\n    className: \"danger\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233\n    },\n    __self: this\n  }, \"Cancelar Seguro \"));\n}\n\nfunction Contratar(token) {\n  var _useForm = useForm({\n    mode: \"onBlur\" // Lanza validaciones cada vez que hago blur\n\n  }),\n      register = _useForm.register,\n      errors = _useForm.errors,\n      formState = _useForm.formState,\n      handleSubmit = _useForm.handleSubmit,\n      setError = _useForm.setError;\n\n  return React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245\n    },\n    __self: this\n  }, React.createElement(\"form\", {\n    action: \"\",\n    method: \"post\",\n    onSubmit: handleSubmit(buyInsur(token)),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247\n    },\n    __self: this\n  }, \"Tipo de Seguro:\"), React.createElement(\"select\", {\n    id: \"types\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248\n    },\n    __self: this\n  }, React.createElement(\"option\", {\n    value: \"1\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249\n    },\n    __self: this\n  }, \"Basico\"), React.createElement(\"option\", {\n    selected: true,\n    value: \"2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250\n    },\n    __self: this\n  }, \"Reforzado\"), React.createElement(\"option\", {\n    value: \"3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251\n    },\n    __self: this\n  }, \"Premiun\")), React.createElement(\"button\", {\n    id: \"contratar\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253\n    },\n    __self: this\n  }, \"Contratar Seguro\")));\n}\n\nfunction del(token) {\n  var respon;\n  return _regeneratorRuntime.async(function del$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.next = 2;\n          return _regeneratorRuntime.awrap(deleteAcount(token));\n\n        case 2:\n          respon = _context4.sent;\n          _context4.next = 5;\n          return _regeneratorRuntime.awrap(respon);\n\n        case 5:\n          if (!_context4.sent) {\n            _context4.next = 7;\n            break;\n          }\n\n          window.location.href = \"https://segurosalud.herokuapp.com/\";\n\n        case 7:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  });\n}\n\nfunction Datos() {\n  var _useAuth2, token, response, data, keys, values, index, res;\n\n  return _regeneratorRuntime.async(function Datos$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          _useAuth2 = useAuth(), token = _useAuth2.token;\n          _context5.next = 3;\n          return _regeneratorRuntime.awrap(getDatos(token));\n\n        case 3:\n          response = _context5.sent;\n          data = response.data.Datos;\n          _context5.next = 7;\n          return _regeneratorRuntime.awrap(response);\n\n        case 7:\n          console.log(data);\n          _context5.next = 10;\n          return _regeneratorRuntime.awrap(data.first_name);\n\n        case 10:\n          document.getElementById(\"first_name\").innerHTML = _context5.sent;\n          keys = Object.keys(data);\n          values = Object.values(data);\n          index = 0;\n\n        case 14:\n          if (!(index < keys.length)) {\n            _context5.next = 30;\n            break;\n          }\n\n          if (!(keys[index] == \"gender\")) {\n            _context5.next = 25;\n            break;\n          }\n\n          _context5.t0 = values[index];\n          _context5.next = _context5.t0 === 0 ? 19 : _context5.t0 === 1 ? 21 : 23;\n          break;\n\n        case 19:\n          values[index] = \"Mujer\";\n          return _context5.abrupt(\"break\", 23);\n\n        case 21:\n          values[index] = \"Hombre\";\n          return _context5.abrupt(\"break\", 23);\n\n        case 23:\n          _context5.next = 26;\n          break;\n\n        case 25:\n          if (keys[index] == \"dob\") {\n            res = values[index].split(\"T\");\n            values[index] = res[0];\n          }\n\n        case 26:\n          document.getElementById(\"\".concat(keys[index])).innerHTML = values[index];\n\n        case 27:\n          index++;\n          _context5.next = 14;\n          break;\n\n        case 30:\n        case \"end\":\n          return _context5.stop();\n      }\n    }\n  });\n}\n\nfunction buyInsur(token) {\n  var type, precio;\n  return _regeneratorRuntime.async(function buyInsur$(_context6) {\n    while (1) {\n      switch (_context6.prev = _context6.next) {\n        case 0:\n          if (!(document.getElementById(\"types\") != null)) {\n            _context6.next = 22;\n            break;\n          }\n\n          document.getElementById(\"contratar\").diabled = true;\n          type = document.getElementById(\"types\").value;\n          _context6.t0 = _regeneratorRuntime;\n          _context6.t1 = calcularPrecio;\n          _context6.next = 7;\n          return _regeneratorRuntime.awrap(type);\n\n        case 7:\n          _context6.t2 = _context6.sent;\n          _context6.t3 = (0, _context6.t1)(_context6.t2);\n          _context6.next = 11;\n          return _context6.t0.awrap.call(_context6.t0, _context6.t3);\n\n        case 11:\n          precio = _context6.sent;\n          _context6.prev = 12;\n          _context6.next = 15;\n          return _regeneratorRuntime.awrap(buySeguro(token, type, precio));\n\n        case 15:\n          window.alert(\"Seguro adquirido con exito\");\n          Poliza(token);\n          _context6.next = 22;\n          break;\n\n        case 19:\n          _context6.prev = 19;\n          _context6.t4 = _context6[\"catch\"](12);\n          window.alert(\"Algo a ido mal intentelo de nuevo\");\n\n        case 22:\n        case \"end\":\n          return _context6.stop();\n      }\n    }\n  }, null, null, [[12, 19]]);\n}\n\n;\n\nfunction calcularPrecio(type) {\n  var dob = document.getElementById(\"dob\").innerHTML;\n  var pais = document.getElementById(\"born_in\").innerHTML;\n  var sexo = document.getElementById(\"gender\").innerHTML;\n  var today = new Date();\n  var year = today.getFullYear();\n  var res = dob.split(\"-\");\n  var edad = year - res[0];\n  var incremento = 0;\n  var precio = 0;\n\n  switch (type) {\n    case \"1\":\n      precio = 10;\n      break;\n\n    case \"2\":\n      precio = 20;\n      break;\n\n    case \"3\":\n      precio = 30;\n      break;\n  }\n\n  if (edad == 50 || edad < 30) {\n    incremento = incremento + 16.66;\n  }\n\n  if (pais !== \"Spain\") {\n    incremento = incremento + 33.33;\n  }\n\n  if (sexo == \"Hombre\") {\n    incremento = incremento + 33.33;\n  }\n\n  incremento = (incremento + 100) / 100;\n  precio = Math.round(precio * incremento * 100) / 100;\n  return precio;\n}\n\nfunction Poliza(token) {\n  var response, policies, _iteratorNormalCompletion2, _didIteratorError2, _iteratorError2, _iterator2, _step2, policie, type, output;\n\n  return _regeneratorRuntime.async(function Poliza$(_context7) {\n    while (1) {\n      switch (_context7.prev = _context7.next) {\n        case 0:\n          _context7.next = 2;\n          return _regeneratorRuntime.awrap(getPolices(token));\n\n        case 2:\n          response = _context7.sent;\n          policies = response.data;\n          document.getElementById(\"polizas\").innerHTML = \"\";\n          _iteratorNormalCompletion2 = true;\n          _didIteratorError2 = false;\n          _iteratorError2 = undefined;\n          _context7.prev = 8;\n          _iterator2 = policies[Symbol.iterator]();\n\n        case 10:\n          if (_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done) {\n            _context7.next = 28;\n            break;\n          }\n\n          policie = _step2.value;\n          type = policie.policyType;\n          _context7.t0 = type;\n          _context7.next = _context7.t0 === 1 ? 16 : _context7.t0 === 2 ? 18 : _context7.t0 === 3 ? 20 : 22;\n          break;\n\n        case 16:\n          type = \"Basico\";\n          return _context7.abrupt(\"break\", 22);\n\n        case 18:\n          type = \"Reforzado\";\n          return _context7.abrupt(\"break\", 22);\n\n        case 20:\n          type = \"Premiun\";\n          return _context7.abrupt(\"break\", 22);\n\n        case 22:\n          output = \"<fieldset>\\n      <label>Numero de Poliza:</label>\\n      <label>\".concat(policie.policyNumber, \"</label>\\n      </fieldset>\\n      <fieldset>\\n      <label>Tipo de seguro:</label>\\n      <label>\").concat(type, \"<label>\\n      </fieldset>\\n      <fieldset>\\n      </fieldset>\");\n          console.log(policie);\n          document.getElementById(\"polizas\").innerHTML = output + document.getElementById(\"polizas\").innerHTML;\n\n        case 25:\n          _iteratorNormalCompletion2 = true;\n          _context7.next = 10;\n          break;\n\n        case 28:\n          _context7.next = 34;\n          break;\n\n        case 30:\n          _context7.prev = 30;\n          _context7.t1 = _context7[\"catch\"](8);\n          _didIteratorError2 = true;\n          _iteratorError2 = _context7.t1;\n\n        case 34:\n          _context7.prev = 34;\n          _context7.prev = 35;\n\n          if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n            _iterator2.return();\n          }\n\n        case 37:\n          _context7.prev = 37;\n\n          if (!_didIteratorError2) {\n            _context7.next = 40;\n            break;\n          }\n\n          throw _iteratorError2;\n\n        case 40:\n          return _context7.finish(37);\n\n        case 41:\n          return _context7.finish(34);\n\n        case 42:\n        case \"end\":\n          return _context7.stop();\n      }\n    }\n  }, null, null, [[8, 30, 34, 42], [35,, 37, 41]]);\n}","map":{"version":3,"sources":["/home/server/Escritorio/Frontent2/src/componets/pages/user.js"],"names":["React","useState","useForm","getDatos","solicitarAsistencia","deleteAcount","buySeguro","getPolices","cancelPolice","useAuth","User","isFormOpen","setIsFormOpen","token","login","document","getElementById","innerHTML","parentNode","removeChild","Poliza","Datos","del","Contratar","BajaPoliza","enviar","formDatos","first_name","last_name","email","dob","address","postal_code","phone","BorIn","style","consoles","console","log","title","value","description","price","content","window","alert","Optiones","response","policies","data","out","police","policyId","policyNumber","cancel","id","mode","register","errors","formState","handleSubmit","setError","buyInsur","respon","location","href","keys","Object","values","index","length","res","split","diabled","type","calcularPrecio","precio","pais","sexo","today","Date","year","getFullYear","edad","incremento","Math","round","policie","policyType","output"],"mappings":"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","sourcesContent":["import React, {useState} from \"react\"\nimport { useForm } from \"react-hook-form\";\nimport {getDatos, solicitarAsistencia, deleteAcount, buySeguro, getPolices, cancelPolice} from \"../axios/userServices\";\nimport { useAuth } from \"../commons/auth/auth-context\";\n\nfunction User() {\n  const [isFormOpen, setIsFormOpen] = useState(false);\n\n  const {token} = useAuth();\n  \n  \n  let login = document.getElementById('login');\n if(login!=null){\n  login.innerHTML=\"\"  \n  login.parentNode.removeChild(login);\n}\n  \n  Poliza(token)\n  Datos()\n  return (\n      <React.Fragment>\n        <section id=\"user\">\n  <span id=\"datos\">\n  <h1>Mis Datos:</h1>\n  <fieldset>\n  <h2 id=\"first_name\"></h2>\n    <h3 id=\"last_name\"></h3>\n  </fieldset>\n  <fieldset>\n    <label>Phone:</label>\n<label id=\"phone\"></label>\n  </fieldset>\n  <fieldset>\n    <label>email:</label>\n<label id=\"email\"></label>\n  </fieldset>\n  <fieldset>\n    <label>gender:</label>\n<label id=\"gender\"></label>\n  </fieldset>\n  <fieldset>\n    <label>Direccion:</label>\n    <label id=\"address\"></label>\n  </fieldset>\n  <fieldset>\n    <label>Fecha de nacimiento:</label>\n<label id=\"dob\"></label>\n  </fieldset>\n  <fieldset>\n    <label>Born IN:</label>\n<label id=\"born_in\"></label>\n  </fieldset>\n  <fieldset>\n    <label>Codigo Postal:</label>\n<label id=\"postal_code\"></label>\n  </fieldset>\n  <fieldset>\n    <p>\n    <button class=\"danger\" id=\"danger\" onClick={()=>del(token)} >Cancelar Cuenta</button>\n    </p>\n  </fieldset>\n  </span>\n  <span id=\"poliza\">\n  <h1 id=\"mis_polizas\">Mis Poliza:</h1>\n  \n  <fieldset id=\"polizas\"/>\n  <h1>Contratar nueva Poliza</h1>\n  \n  <fieldset id=\"contratar\">\n  {Contratar(token)}\n  </fieldset>\n\n  <h1> Cancelación</h1>\n  <fieldset>\n{BajaPoliza(token)}\n\n  </fieldset>\n  </span>\n \n          <span id=\"solicitud\">\n            <h1>Solicitar asistencia:</h1>\n            <fieldset>\n              <h2>Titulo:</h2>\n              <input type=\"text\" id=\"title\" />\n            </fieldset>\n            <fieldset>\n              <h3>Descripcion</h3>\n              <textarea id=\"description\" />\n            </fieldset>\n            <fieldset>\n              <h3>Precio Estimado</h3>\n              <input type=\"number\" id=\"price\"/>\n            </fieldset>\n            <fieldset>\n              <button onClick={()=>enviar(token)}>Enviar</button>\n            </fieldset>\n          </span>\n          <span id=\"acciones\">\n            <h1>Acciones</h1>\n            <fieldset id=\"cambiar_datos\">\n            \n              <button onClick={()=>formDatos()} >Cambiar Datos</button> \n            \n            </fieldset>\n            <fieldset>\n            </fieldset>\n          </span>\n        </section>\n        \n      </React.Fragment>\n    );\n  }\n\n\nexport default User;\n\nfunction formDatos(){\nlet first_name=document.getElementById(\"first_name\").innerHTML\nlet last_name=document.getElementById(\"last_name\").innerHTML\nlet email=document.getElementById(\"email\").innerHTML\nlet dob=document.getElementById(\"dob\").innerHTML\nlet address=document.getElementById(\"address\").innerHTML\nlet postal_code=document.getElementById(\"postal_code\").innerHTML\nlet phone=document.getElementById(\"phone\").innerHTML\nlet BorIn=document.getElementById(\"born_in\").innerHTML\ndocument.getElementById(\"cambiar_datos\").innerHTML=`\n<fieldset>\n  <label>Nombre</label>\n  <input type=\"text\" required id=\"c_first_name\" value=${first_name}>\n  </fieldset>\n  <fieldset>\n  <label>Apellidos</label>\n  <input type=\"text\" required id=\"c_last_name\" value=${last_name}>\n  </fieldset>\n  <fieldset>\n  <label>Email</label>\n  <input type=\"text\" required id=\"c_email\" value=${email}>\n  </fieldset>\n  <fieldset>\n  <label>Password</label>\n  <input type=\"password\" required id=\"c_password\">\n  </fieldset>\n  <fieldset>\n  <label>Genero</label>\n  <select id=\"c_gender\" required>\n    <option value=\"0\">Hombre</option>\n    <option value=\"1\">Mujer</option>\n  </select>  \n  </fieldset>\n  <fieldset>\n  <label>Fecha de nacimiento</label>\n  <input required type=\"date\" value=${dob} id=\"c_dob\">\n  </fieldset>\n  <fieldset>\n  <label>Direccion</label>\n  <input required type=\"text\" id=\"c_address\" value=${address}>\n  </fieldset>\n  <fieldset>\n  <label>Codigo Postal</label>\n  <input required type=\"text\" id=\"c_postal_code\" value=${postal_code}>\n  </fieldset>\n  <fieldset>\n  <label>Telefono</label>\n  <input type=\"text\" required id=\"c_phone\" value=${phone}>\n  </fieldset>\n  <fieldset>\n  <label>BorIn</label>\n  <input type=\"text\" required id=\"c_BorIn\" value=${BorIn}>\n  </fieldset>\n  <button onClick=consoles() >Cambiar Datos</button>\n  `;\n  document.getElementById(\"cambio\").style=\"visibility:visible\"\n\n}\nfunction consoles(){\n  console.log(\"parece que si\")\n}\n\nasync function enviar(token){\nlet title=document.getElementById(\"title\").value\nlet description=document.getElementById(\"description\").value\nlet price=document.getElementById(\"price\").value\nlet content=`${title}:${description}.Price:${price}`;\ntry{ \nawait solicitarAsistencia(token,content);\n document.getElementById(\"title\").value=\"\"\n document.getElementById(\"description\").value=\"\"\n document.getElementById(\"price\").value=\"\"\n window.alert(\"Solicitud Enviada\");\n}catch{\n  window.alert(\"Algo a ido mal intentelo de nuevo\");\n}\n\n}\n\nfunction BajaPoliza(token){\n   \n      async function Optiones(token){\n      let response = await  getPolices(token)\n      let policies = response.data;\n      document.getElementById(\"policies\").innerHTML=\"\"\n      let out=\"\"\n      for (const police of policies) {\n        let out=`<option value=\"${police.policyId}\">${police.policyNumber}</option>`;\n    document.getElementById(\"policies\").innerHTML= out +   document.getElementById(\"policies\").innerHTML;\n        \n      }\n    }\n      async function cancel(token){\n        console.log(\"cancel\");\nif(document.getElementById(\"policies\")!=null){\n        let id= document.getElementById(\"policies\").value\n       try{\n        await cancelPolice(token,id);\n        window.alert(\"Poliza borrada\");\n        Poliza(token)\n        Optiones(token)\n       }catch{\n        window.alert(\"Algo a ido mal intentelo de nuevo\");\n\n       }\n      }}\n      \n    \n    Optiones(token)\n  return(\n    <span> \n    \n    <label>Mis polizas:</label>\n    <select id=\"policies\">\n    \n    </select>\n    <button id=\"cotratar\" onClick={()=>cancel(token)} className=\"danger\">Cancelar Seguro </button> \n  \n    </span>\n      )\n\n}\n\nfunction Contratar(token){\n  const { register, errors, formState, handleSubmit, setError } = useForm({\n    mode: \"onBlur\" // Lanza validaciones cada vez que hago blur\n  });\n  return(\n    <span> \n    <form action=\"\" method=\"post\" onSubmit={handleSubmit(buyInsur(token))}>\n    <label>Tipo de Seguro:</label>\n    <select id=\"types\">\n<option value=\"1\">Basico</option>\n<option selected value=\"2\">Reforzado</option>\n<option value=\"3\">Premiun</option>\n    </select>\n    <button id=\"contratar\" >Contratar Seguro</button> \n    </form>\n    </span> )\n}\n\nasync function del(token){\n  let respon = await deleteAcount(token)\n    if(await respon ){\n      window.location.href=\"https://segurosalud.herokuapp.com/\"\n    }\n }\n \n  \n  \n\n async function Datos(){\n  \n  const {token} = useAuth();\n  const  response = await getDatos(token);\n  const data= response.data.Datos\n  await response;\n    console.log(data);\n    document.getElementById(\"first_name\").innerHTML= await data.first_name\n  const keys = Object.keys(data)\nconst values= Object.values(data)\n  for (let index = 0; index < keys.length; index++) {\n    if(keys[index]==\"gender\"){\n      switch (values[index]) {\n        case 0:\n        values[index] =\"Mujer\";\n        break;\n        case 1:\n        values[index]=\"Hombre\";\n        break;\n    }\n  }else if (keys[index]==\"dob\") {\n    var res = values[index].split(\"T\") \n    values[index]=res[0];\n  }\n\n    document.getElementById(`${keys[index]}`).innerHTML= values[index]\n\n  }\n\n    \n  }\n    \n   async function buyInsur(token){\n     if(document.getElementById(\"types\")!=null){\n    document.getElementById(\"contratar\").diabled=true\n    let type=document.getElementById(\"types\").value\n      let precio= await calcularPrecio(await type);\n      try{\n        await buySeguro(token,type,precio)\n        window.alert(\"Seguro adquirido con exito\");\n        Poliza(token)\n  }catch{\n    window.alert(\"Algo a ido mal intentelo de nuevo\");\n\n  }\n\n    } \n    };\n  \n \n   function calcularPrecio(type) {\n    let dob = document.getElementById(\"dob\").innerHTML;\n    let pais =  document.getElementById(\"born_in\").innerHTML;\n    let sexo =  document.getElementById(\"gender\").innerHTML;\n    \n    let today = new Date();\n    let year = today.getFullYear();\n    var res = dob.split(\"-\")\n    let edad= year-res[0]\n    let incremento = 0;\n    let precio=0\n    switch (type) {\n      case \"1\":\n    precio = 10;\n        break;\n      case \"2\":\n    precio = 20;\n      break;\n      case \"3\":\n    precio = 30;\n      break;\n      }\n    \n    if (edad == 50 || edad < 30) {\n      incremento = incremento + 16.66;\n    }\n    if (pais !== \"Spain\") {\n      incremento = incremento + 33.33;\n    }\n    if (sexo == \"Hombre\") {\n      incremento = incremento + 33.33;\n    }\n    incremento = (incremento + 100) / 100;\n    precio = Math.round(precio * incremento * 100) / 100;\n \n    return precio;\n  }\n   async function Poliza(token){\n     let response = await getPolices(token)\n    let policies = response.data;\n    document.getElementById(\"polizas\").innerHTML= \"\";\n\n    for (const policie of policies) {\n      let type=policie.policyType\n      switch (type) {\n        case 1:\n          type=\"Basico\"\n          break;\n          case 2:\n          type=\"Reforzado\"\n          break;\n          case 3:\n          type=\"Premiun\"\n          break;\n      }\n      let output = `<fieldset>\n      <label>Numero de Poliza:</label>\n      <label>${policie.policyNumber}</label>\n      </fieldset>\n      <fieldset>\n      <label>Tipo de seguro:</label>\n      <label>${type}<label>\n      </fieldset>\n      <fieldset>\n      </fieldset>` \n      console.log(policie)\n    document.getElementById(\"polizas\").innerHTML= output + document.getElementById(\"polizas\").innerHTML;\n    }\n    }"]},"metadata":{},"sourceType":"module"}